{"mappings":"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","sources":["src/js/form.js"],"sourcesContent":["import { sendMessage } from \"./sendMessage\";\n\nconst $form = document.querySelector(\".form\");\nconst $formListInputs = document.querySelector(\".form__list\");\nconst $fieldsControls = document.querySelectorAll(\".form__item__field\");\nconst $successIcons = document.querySelectorAll(\".form__item__icon-success\");\n\nconst HIDE_ICON = 0;\nconst SHOW_ICON = 1;\n\nconst validation = {\n  isLengthValid(input, errorMessage) {\n    return input.length > 0 || { message: errorMessage };\n  },\n  isMinLength(input, min, errorMessage) {\n    return input.length >= min || { message: errorMessage };\n  },\n  isEmailValid(input, errorMessage) {\n    const regexPattern =\n      /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n    return (\n      regexPattern.test(String(input).toLowerCase()) || {\n        message: errorMessage,\n      }\n    );\n  },\n};\n\ninit();\n\nfunction init() {\n  // add icon to Input onChange when there is no error\n\n  $formListInputs.addEventListener(\n    \"keyup\",\n    debounce(({ target }) => {\n      const listItemParent = target.parentElement;\n      const inputName = target.attributes[\"data-validate\"].value;\n      const error = checkInputOnChange(inputName, target.value);\n\n      if (!error?.message) {\n        listItemParent.querySelector(\n          \".form__item__icon-success\"\n        ).style.opacity = SHOW_ICON;\n\n        listItemParent.querySelector(\n          \".form__item__icon-failure\"\n        ).style.opacity = HIDE_ICON;\n\n        listItemParent.nextSibling.nextSibling.querySelector(\n          \".form__error-text\"\n        ).textContent = \"\";\n      } else {\n        listItemParent.querySelector(\n          \".form__item__icon-success\"\n        ).style.opacity = HIDE_ICON;\n      }\n    }, 500)\n  );\n\n  // submit form\n\n  $form.addEventListener(\"submit\", onFormSubmit);\n}\n\nfunction onFormSubmit(event) {\n  event.preventDefault();\n\n  const formData = Object.fromEntries(new FormData($form).entries());\n\n  const errors = checkFieldsOnSubmit(formData);\n  displayError(errors);\n\n  if (!isError(errors).length) {\n    $form.reset();\n    resetIcons($successIcons);\n\n    /*\n\n      sendMessage(formData);\n\n      function call commented now because I do not want to use limited numbers of email.js requests\n\n    */\n\n    showSuccessModal();\n  }\n}\n\n// helpers\n\nfunction checkInputOnChange(inputName, targetValue) {\n  const validate = {\n    name: validation.isMinLength(\n      targetValue,\n      3,\n      \"must be at least 3 characters\"\n    ),\n    email: validation.isEmailValid(\n      targetValue,\n      \"email is not valid - has to contains @ .\"\n    ),\n    subject: validation.isMinLength(\n      targetValue,\n      3,\n      \"must be at least 3 characters\"\n    ),\n    description: validation.isMinLength(\n      targetValue,\n      3,\n      \"must be at least 3 characters\"\n    ),\n  };\n\n  for (const key in validate) {\n    if (key === inputName) {\n      return validate[inputName];\n    }\n  }\n}\n\nfunction checkFieldsOnSubmit(formData) {\n  const { name, email, subject, description } = formData;\n\n  return {\n    name: [\n      validation.isLengthValid(name, \"name is required\"),\n      validation.isMinLength(name, 3, \"must be at least 3 characters\"),\n    ],\n    email: [\n      validation.isLengthValid(email, \"email is required\"),\n      validation.isEmailValid(\n        email,\n        \"email is not valid - has to contains @ .\"\n      ),\n    ],\n    subject: [\n      validation.isLengthValid(subject, \"subject is required\"),\n      validation.isMinLength(subject, 3, \"must be at least 3 characters\"),\n    ],\n    description: [\n      validation.isLengthValid(description, \"description is required\"),\n      validation.isMinLength(description, 3, \"must be at least 3 characters\"),\n    ],\n  };\n}\n\nfunction displayError(errors) {\n  const $errorsParagraphs = document.querySelectorAll(\".form__error-text\");\n\n  Object.values(errors).forEach((error, index) => {\n    const foundError = error.find((error) => error?.message);\n    const errorText = $errorsParagraphs[index];\n    const listItem = $fieldsControls[index].parentElement;\n    const errorIcon = listItem.querySelector(\".form__item__icon-failure\");\n\n    errorIcon.style.opacity = foundError ? SHOW_ICON : HIDE_ICON;\n    errorText.textContent = foundError?.message;\n  });\n}\n\nfunction debounce(fn, delay) {\n  let timeoutId;\n\n  return (...args) => {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n\n    timeoutId = setTimeout(() => fn(...args), delay);\n  };\n}\n\nfunction isError(data) {\n  return Object.values(data).reduce((acc, val) => {\n    val.filter((error) => (error?.message ? acc.push(error.message) : true));\n\n    return acc;\n  }, []);\n}\n\nfunction resetIcons(icons) {\n  return icons.forEach((icon) => (icon.style.opacity = HIDE_ICON));\n}\n\nfunction showSuccessModal() {\n  Swal.fire({\n    position: \"center\",\n    icon: \"success\",\n    title: \"Your  message has been sent\",\n    text: \"I will respond soon ðŸ‘‹\",\n    timer: 3000,\n    color: \"#2c2323\",\n    confirmButtonColor: \"green\",\n  });\n}\n"],"names":["$d2247bac48b6a171$var$$form","document","querySelector","$d2247bac48b6a171$var$$formListInputs","$d2247bac48b6a171$var$$fieldsControls","querySelectorAll","$d2247bac48b6a171$var$$successIcons","$d2247bac48b6a171$var$validation","isLengthValid","input","errorMessage","length","message","isMinLength","min","isEmailValid","test","String","toLowerCase","$d2247bac48b6a171$var$onFormSubmit","event","preventDefault","errors","formData","name","email","subject","description","$d2247bac48b6a171$var$checkFieldsOnSubmit","Object","fromEntries","FormData","entries","data","$errorsParagraphs","values","forEach","error1","index","foundError","find","error","errorText","parentElement","style","opacity","textContent","$d2247bac48b6a171$var$displayError","reduce","acc","val","filter","push","reset","icon","Swal","fire","position","title","text","timer","color","confirmButtonColor","addEventListener","fn","delay","timeoutId","args","clearTimeout","setTimeout","$d2247bac48b6a171$var$debounce","target","listItemParent","inputName","targetValue","validate","key","$d2247bac48b6a171$var$checkInputOnChange","attributes","value","nextSibling"],"version":3,"file":"index.d70cc43d.js.map"}