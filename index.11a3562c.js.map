{"mappings":"AAEA,MAAMA,EAAQC,SAASC,cAAc,SAC/BC,EAAkBF,SAASC,cAAc,eACzCE,EAAkBH,SAASI,iBAAiB,qBAC5CC,EAAgBL,SAASI,iBAAiB,4BAK1CE,EAAa,CACjBC,cAAa,CAACC,EAAOC,IACZD,EAAME,OAAS,GAAK,CAAEC,QAASF,GAExCG,YAAW,CAACJ,EAAOK,EAAKJ,IACfD,EAAME,QAAUG,GAAO,CAAEF,QAASF,GAE3CK,aAAY,CAACN,EAAOC,IACA,wJAIHM,KAAKC,OAAOR,GAAOS,gBAAkB,CAChDN,QAASF,IAiCjB,SAASS,EAAaC,GACpBA,EAAMC,iBAEN,MAEMC,EA6CR,SAA6BC,GAC3B,MA3GFC,KA2GUA,EA3GVC,MA2GgBA,EA3GhBC,QA2GuBA,EA3GvBd,QA2GgCA,GAAYW,EAE1C,MAAO,CACLC,KAAM,CACJjB,EAAWC,cAAcgB,EAAM,oBAC/BjB,EAAWM,YAAYW,EAAM,EAAG,kCAElCC,MAAO,CACLlB,EAAWC,cAAciB,EAAO,qBAChClB,EAAWQ,aACTU,EACA,6CAGJC,QAAS,CACPnB,EAAWC,cAAckB,EAAS,uBAClCnB,EAAWM,YAAYa,EAAS,EAAG,kCAErCd,QAAS,CACPL,EAAWC,cAAcI,EAAS,uBAClCL,EAAWM,YAAYD,EAAS,EAAG,mCAlExBe,CAFEC,OAAOC,YAAY,IAAIC,SAAS9B,GAAO+B,YA4G1D,IARiBC,GA3BjB,SAAsBV,GACpB,MAAMW,EAAoBhC,SAASI,iBAAiB,0BAEpDuB,OAAOM,OAAOZ,GAAQa,SAAQ,CAACC,EAAOC,KACpC,MAAMC,EAAaF,EAAMG,MAAMC,GAAUA,GAAO5B,UAE1C6B,EAAYR,EAAkBI,GACjBjC,EAAgBiC,GAAOK,cACbxC,cAAc,4BAEjCyC,MAAMC,QAAUR,GAAOxB,QAtInB,EADA,EAwId6B,EAAUI,YAAcP,GAAY1B,WAhFtCkC,CAAaxB,GAgGEU,EA9FFV,EA+FNM,OAAOM,OAAOF,GAAMe,QAAO,CAACC,EAAKC,MAC9BA,EAAIV,MAAMC,GAAUA,GAAO5B,YAGlC,KAlGDZ,EAAMkD,QACK5C,EAqGA6B,SAASgB,GAAUA,EAAKR,MAAMC,QAjK3B,IAqKhBQ,KAAKC,KAAK,CACRC,SAAU,SACVH,KAAM,UACNI,MAAO,8BACPC,KAAM,yBACNC,MAAO,IACPC,MAAO,UACPC,mBAAoB,WAjJtBxD,EAAgByD,iBACd,QAgHJ,SAAkBC,EAAIC,GACpB,IAAIC,EAEJ,MAAO,IAAIC,KACLD,GAAIE,aAAaF,GAErBA,EAAKG,YAAW,KACdL,KAAMG,KACLF,IAvHHK,EAAS,EApCbC,OAoCgBA,MACV,MAAMC,EAAcD,EAAO1B,cAErBF,EAqCZ,SAA4B8B,EAAWC,GACrC,MAAMC,EAAW,CACfhD,KAAMjB,EAAWM,YACf0D,EACA,EACA,iCAEF9C,MAAOlB,EAAWQ,aAChBwD,EACA,4CAEF7C,QAASnB,EAAWM,YAClB0D,EACA,EACA,iCAEF3D,QAASL,EAAWM,YAClB0D,EACA,EACA,kCAIJ,IAAK,MAAME,KAAOD,EAChB,GAAIC,IAAQH,EACV,OAAOE,EAASF,GA9DFI,CADIN,EAAOO,WAAW,iBAAiBC,MACTR,EAAOQ,OAE/CpC,GAAO5B,QACTyD,EAAYQ,SAAS,GAAGlC,MAAMC,QAnCpB,GAqCVyB,EAAYQ,SAAS,GAAGlC,MAAMC,QApCpB,EAqCVyB,EAAYnE,cAAc,0BAA0B2C,YAAc,GAClEwB,EAAYnE,cAAc,4BAA4ByC,MAAMC,QAvClD,KA0CX,MAIL5C,EAAM4D,iBAAiB,SAAUzC","sources":["src/js/form.js"],"sourcesContent":["import { sendMessage } from \"./sendMessage\";\n\nconst $form = document.querySelector(\".form\");\nconst $formListInputs = document.querySelector(\".form__list\");\nconst $fieldsControls = document.querySelectorAll(\".form__item-field\");\nconst $successIcons = document.querySelectorAll(\".form__item-icon-success\");\n\nconst HIDE_ICON = 0;\nconst SHOW_ICON = 1;\n\nconst validation = {\n  isLengthValid(input, errorMessage) {\n    return input.length > 0 || { message: errorMessage };\n  },\n  isMinLength(input, min, errorMessage) {\n    return input.length >= min || { message: errorMessage };\n  },\n  isEmailValid(input, errorMessage) {\n    const regexPattern =\n      /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n    return (\n      regexPattern.test(String(input).toLowerCase()) || {\n        message: errorMessage,\n      }\n    );\n  },\n};\n\ninit();\n\nfunction init() {\n  // add icon to Input onChange when there is no error\n\n  $formListInputs.addEventListener(\n    \"keyup\",\n    debounce(({ target }) => {\n      const actualInput = target.parentElement;\n      const inputName = target.attributes[\"data-validate\"].value;\n      const error = checkInputOnChange(inputName, target.value);\n\n      if (error?.message) {\n        actualInput.children[3].style.opacity = HIDE_ICON;\n      } else {\n        actualInput.children[3].style.opacity = SHOW_ICON;\n        actualInput.querySelector(\".form__item-error-text\").textContent = \"\";\n        actualInput.querySelector(\".form__item-icon-failure\").style.opacity =\n          HIDE_ICON;\n      }\n    }, 500)\n  );\n\n  // submit form\n  $form.addEventListener(\"submit\", onFormSubmit);\n}\n\nfunction onFormSubmit(event) {\n  event.preventDefault();\n\n  const formData = Object.fromEntries(new FormData($form).entries());\n\n  const errors = checkFieldsOnSubmit(formData);\n\n  displayError(errors);\n\n  if (!isError(errors)) {\n    $form.reset();\n    resetIcons($successIcons);\n\n    // sendMessage(formData); at the moment is locked because email.js has got max 200 request per months for free\n    showSuccessModal();\n  }\n}\n\n// helpers\n\nfunction checkInputOnChange(inputName, targetValue) {\n  const validate = {\n    name: validation.isMinLength(\n      targetValue,\n      3,\n      \"must be at least 3 characters\"\n    ),\n    email: validation.isEmailValid(\n      targetValue,\n      \"email is not valid - has to contains @ .\"\n    ),\n    subject: validation.isMinLength(\n      targetValue,\n      3,\n      \"must be at least 3 characters\"\n    ),\n    message: validation.isMinLength(\n      targetValue,\n      3,\n      \"must be at least 3 characters\"\n    ),\n  };\n\n  for (const key in validate) {\n    if (key === inputName) {\n      return validate[inputName];\n    }\n  }\n}\n\nfunction checkFieldsOnSubmit(formData) {\n  const { name, email, subject, message } = formData;\n\n  return {\n    name: [\n      validation.isLengthValid(name, \"name is required\"),\n      validation.isMinLength(name, 3, \"must be at least 3 characters\"),\n    ],\n    email: [\n      validation.isLengthValid(email, \"email is required\"),\n      validation.isEmailValid(\n        email,\n        \"email is not valid - has to contains @ .\"\n      ),\n    ],\n    subject: [\n      validation.isLengthValid(subject, \"subject is required\"),\n      validation.isMinLength(subject, 3, \"must be at least 3 characters\"),\n    ],\n    message: [\n      validation.isLengthValid(message, \"message is required\"),\n      validation.isMinLength(message, 3, \"must be at least 3 characters\"),\n    ],\n  };\n}\n\nfunction displayError(errors) {\n  const $errorsParagraphs = document.querySelectorAll(\".form__item-error-text\");\n\n  Object.values(errors).forEach((error, index) => {\n    const foundError = error.find((error) => error?.message);\n\n    const errorText = $errorsParagraphs[index];\n    const inputField = $fieldsControls[index].parentElement;\n    const errorIcon = inputField.querySelector(\".form__item-icon-failure\");\n\n    errorIcon.style.opacity = error?.message ? SHOW_ICON : HIDE_ICON;\n    errorText.textContent = foundError?.message;\n  });\n}\n\nfunction debounce(fn, delay) {\n  let id;\n\n  return (...args) => {\n    if (id) clearTimeout(id);\n\n    id = setTimeout(() => {\n      fn(...args);\n    }, delay);\n  };\n}\n\nfunction isError(data) {\n  return Object.values(data).reduce((acc, val) => {\n    acc = !!val.find((error) => error?.message);\n\n    return acc;\n  }, true);\n}\n\nfunction resetIcons(icons) {\n  return icons.forEach((icon) => (icon.style.opacity = HIDE_ICON));\n}\n\nfunction showSuccessModal() {\n  Swal.fire({\n    position: \"center\",\n    icon: \"success\",\n    title: \"Your  message has been sent\",\n    text: \"I will respond soon ðŸ‘‹\",\n    timer: 3000,\n    color: \"#2c2323\",\n    confirmButtonColor: \"green\",\n  });\n}\n"],"names":["$d2247bac48b6a171$var$$form","document","querySelector","$d2247bac48b6a171$var$$formListInputs","$d2247bac48b6a171$var$$fieldsControls","querySelectorAll","$d2247bac48b6a171$var$$successIcons","$d2247bac48b6a171$var$validation","isLengthValid","input","errorMessage","length","message","isMinLength","min","isEmailValid","test","String","toLowerCase","$d2247bac48b6a171$var$onFormSubmit","event","preventDefault","errors","formData","name","email","subject","$d2247bac48b6a171$var$checkFieldsOnSubmit","Object","fromEntries","FormData","entries","data","$errorsParagraphs","values","forEach","error1","index","foundError","find","error","errorText","parentElement","style","opacity","textContent","$d2247bac48b6a171$var$displayError","reduce","acc","val","reset","icon","Swal","fire","position","title","text","timer","color","confirmButtonColor","addEventListener","fn","delay","id","args","clearTimeout","setTimeout","$d2247bac48b6a171$var$debounce","target","actualInput","inputName","targetValue","validate","key","$d2247bac48b6a171$var$checkInputOnChange","attributes","value","children"],"version":3,"file":"index.11a3562c.js.map"}