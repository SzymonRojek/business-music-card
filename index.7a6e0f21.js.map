{"mappings":"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","sources":["src/js/form.js"],"sourcesContent":["const $form = document.querySelector(\".form\");\nconst $submitFormButton = document.querySelector(\".js-submitButton\");\nconst $errorMessage = document.getElementsByClassName(\"form__item-error-text\");\nconst $listFields = document.getElementsByClassName(\".form__list\");\nconst $formListInputs = document.querySelector(\".form__list\");\nconst $successIcons = document.querySelectorAll(\".form__item-icon-success\");\n\nconst HIDE_ICON = 0;\nconst SHOW_ICON = 1;\n\ninit();\n\nfunction init() {\n  // all actions on input keyup change\n\n  $formListInputs.addEventListener(\"keyup\", ({ target }) => {\n    const actualInput = target.parentElement;\n\n    if (target.attributes[1].nodeValue === \"email\") {\n      target.parentElement.children[3].style.opacity = `${\n        isEmailValid(target.value) ? SHOW_ICON : HIDE_ICON\n      }`;\n\n      actualInput.querySelector(\".form__item-error-text\").textContent = \"\";\n      actualInput.querySelector(\".form__item-icon-failure\").style.opacity =\n        HIDE_ICON;\n    } else {\n      target.parentElement.children[3].style.opacity = `${\n        isLengthValid(target.value) ? SHOW_ICON : HIDE_ICON\n      }`;\n\n      actualInput.querySelector(\".form__item-error-text\").textContent = \"\";\n      actualInput.querySelector(\".form__item-icon-failure\").style.opacity =\n        HIDE_ICON;\n    }\n  });\n\n  // submit form\n  $form.addEventListener(\"submit\", onFormSubmit);\n}\n\nfunction onFormSubmit(event) {\n  event.preventDefault();\n\n  const $name = document.querySelector(\".js-form__field-name\");\n  const $email = document.querySelector(\".js-form__field-email\");\n  const $subject = document.querySelector(\".js-form__field-subject\");\n  const $message = document.querySelector(\".js-form__field-message\");\n\n  validateInputOnSubmit(\n    $name,\n    () => isLengthValid($name.value),\n    \"minimum 3 characters required\"\n  );\n\n  validateInputOnSubmit(\n    $email,\n    () => isEmailValid($email.value),\n    \"email is invalid\"\n  );\n\n  validateInputOnSubmit(\n    $subject,\n    () => isLengthValid($subject.value),\n    \"minimum 3 characters required\"\n  );\n\n  validateInputOnSubmit(\n    $message,\n    () => isLengthValid($message.value),\n    \"minimum 3 characters required\"\n  );\n\n  // send message finally\n\n  const { name, subject, email, description } = Object.fromEntries(\n    new FormData($form).entries()\n  );\n\n  const templateParams = {\n    name,\n    subject,\n    email,\n    description,\n  };\n\n  const $existingErrorsElements = document.querySelectorAll(\n    \".form__item-error-text\"\n  );\n  const isAnyErrorMessage = !Array.from($existingErrorsElements).find(\n    (error) => error.textContent !== \"\"\n  );\n\n  if (isAnyErrorMessage) {\n    sendMessage(templateParams);\n    resetIcons($successIcons);\n  }\n}\n\nfunction sendMessage(config) {\n  emailjs\n    .send(process.env.SERVICE_ID, process.env.TEMPLATE_ID, config)\n    .then((response) => {\n      if (response.status === 200) {\n        showSuccessModal();\n        $form.reset();\n      }\n    })\n    .catch((error) => showErrorModal(error));\n}\n\nfunction validateInputOnSubmit(element, callback, messageCallback) {\n  const inputControl = element.parentElement;\n  const $errorMessage = inputControl.querySelector(\".form__item-error-text\");\n\n  const errors = setErrorOnSubmit(element, callback, messageCallback) || [];\n\n  if (errors.length) {\n    $errorMessage.textContent = errors.length ? errors[0].message : \"\";\n  }\n\n  if (!errors.length) {\n    setSuccessOnSubmit(element);\n  }\n}\n\nfunction setErrorOnSubmit(element, callback, messageCallback) {\n  const inputControl = element.parentElement;\n  const $errorIcon = inputControl.querySelector(\".form__item-icon-failure\");\n  const $successIcon = inputControl.querySelector(\".form__item-icon-success\");\n\n  const errors = [];\n\n  if (!element.value) {\n    errors.push({ message: \"field is required\" });\n  }\n\n  if (!callback()) {\n    errors.push({ message: messageCallback });\n  }\n\n  $successIcon.style.opacity = HIDE_ICON;\n  $errorIcon.style.opacity = SHOW_ICON;\n\n  return errors;\n}\n\nfunction setSuccessOnSubmit(element) {\n  const inputControl = element.parentElement;\n  const $errorIcon = inputControl.querySelector(\".form__item-icon-failure\");\n  const $successIcon = inputControl.querySelector(\".form__item-icon-success\");\n  const $errorMessage = inputControl.querySelector(\".form__item-error-text\");\n\n  $errorMessage.textContent = \"\";\n  $errorIcon.style.opacity = HIDE_ICON;\n  $successIcon.style.opacity = SHOW_ICON;\n}\n\n// modals\n\nfunction showSuccessModal() {\n  Swal.fire({\n    position: \"center\",\n    icon: \"success\",\n    title: \"Your  message has been sent\",\n    text: \"I will respond soon ðŸ‘‹\",\n    timer: 3000,\n    color: \"#2c2323\",\n    confirmButtonColor: \"green\",\n  });\n}\n\nfunction showErrorModal(error) {\n  Swal.fire({\n    icon: \"error\",\n    title: \"Email has not been sent ðŸ˜•\",\n    text: `${\n      error.text ? error.text : \"Something went wront, please send it again\"\n    }`,\n    confirmButtonColor: \"crimson\",\n  });\n}\n\n// validation\nconst isEmailValid = (email) => {\n  const re =\n    /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n  return re.test(String(email).toLowerCase());\n};\n\nfunction isLengthValid(text) {\n  return text.length >= 3;\n}\n\nfunction resetIcons(icons) {\n  return Array.from(icons).forEach((icon) => (icon.style.opacity = HIDE_ICON));\n}\n"],"names":["$form","document","querySelector","$submitFormButton","$errorMessage","getElementsByClassName","$listFields","$formListInputs","$successIcons","querySelectorAll","HIDE_ICON","SHOW_ICON","init","addEventListener","target","actualInput","parentElement","attributes","nodeValue","children","style","opacity","isEmailValid","value","textContent","isLengthValid","onFormSubmit","event","preventDefault","$name","$email","$subject","$message","validateInputOnSubmit","name","subject","email","description","Object","fromEntries","FormData","entries","templateParams","$existingErrorsElements","Array","from","find","error","sendMessage","resetIcons","config","emailjs","send","process","env","SERVICE_ID","TEMPLATE_ID","then","response","status","showSuccessModal","reset","catch","showErrorModal","element","callback","messageCallback","$errorMessage1","errors","setErrorOnSubmit","length","message","setSuccessOnSubmit","inputControl","$errorIcon","$successIcon","push","Swal","fire","position","icon","title","text","timer","color","confirmButtonColor","test","String","toLowerCase","icons","forEach"],"version":3,"file":"index.7a6e0f21.js.map"}